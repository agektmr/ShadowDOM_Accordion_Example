<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8" />
    <script>
      var $ = function(query) {
        return document.querySelector(query);
      }
      function createStoryGroup(className, contentSelector)
      {
        var group = document.createElement('div');
        group.className = className;
        // Empty string in select attribute or absence thereof work the same, so no need for special handling.
        group.innerHTML = '<ul><content select="' + contentSelector + '"></content></ul>';
       return group;
      }

      function createStyle()
      {
        var style = document.createElement('style');
        style.scoped = true;
        style.textContent = 'div.breaking { color: Red;font-size: 20px; border: 1px dashed Purple; }' +
            'div.other { padding: 2px 0 0 0; border: 1px solid Cyan; }';
        return style;
      }

      function makeShadowSubtree(storyList)
      {
        var root = new WebKitShadowRoot(storyList);
        root.appendChild(createStyle());
        root.appendChild(createStoryGroup('breaking', '.breaking'));
        root.appendChild(createStoryGroup('other', ''));
      }
      document.addEventListener('DOMContentLoaded', function () {
        [].forEach.call(document.querySelectorAll('ul.stories'), makeShadowSubtree);
      });
    </script>
  </head>
  <body>
    <header>
    </header>
    <section>
<ul class="stories">
    <li><a href="//example.com/stories/1">A story</a></li>
    <li><a href="//example.com/stories/2">Another story</a></li>
    <li class="breaking"><a href="//example.com/stories/3">Also a story</a></li>
    <li><a href="//example.com/stories/4">Yet another story</a></li>
    <li><a href="//example.com/stories/4">Awesome story</a></li>
    <li class="breaking"><a href="//example.com/stories/5">Horrible story</a></li>
</ul>
    </section>
    <footer>
    </footer>
  </body>
</html>